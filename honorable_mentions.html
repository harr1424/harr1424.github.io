<!doctype html>
<html lang="en">

<head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta content="width=device-width, initial-scale=1" name="viewport">

    <!-- Bootstrap CSS -->
    <link crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css"
          integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" rel="stylesheet">


    <title>Honorable Mentions</title>
</head>

<body>
<div class="container">
    <div class="row ">
        <div class="dropdown">
            <a class="btn btn-secondary btn-lg dropdown-toggle" href="#" role="button" id="dropdownMenuLink"
               data-bs-toggle="dropdown" aria-expanded="false">
                Portfolio Contents
            </a>

            <ul class="dropdown-menu" aria-labelledby="dropdownMenuLink">
                <li><a class="dropdown-item" href="index.html">Home</a></li>
                <li>
                    <hr class="dropdown-divider">
                </li>
                <li><a class="dropdown-item" href="mobile_app_dev.html">Mobile Application Development</a></li>
                <li><a class="dropdown-item" href="cloud_computing.html">Cloud Computing</a></li>
                <li><a class="dropdown-item" href="3.html">Topic 3</a></li>
                <li><a class="dropdown-item" href="4.html">Topic 4</a></li>
                <li><a class="dropdown-item" href="5.html">Topic 5</a></li>
                <li><a class="dropdown-item" href="honorable_mentions.html">Honorable Mentions</a></li>
                <li><a class="dropdown-item" href="reflective_essay.html">Reflective Essay</a></li>
                <li><a class="dropdown-item" href="CV.html">Cirriculum Vitae</a></li>
                <li>
                    <hr class="dropdown-divider">
                <li><a class="dropdown-item" href="orange_weather.html">iOS Networking - Orange Weather</a></li>

                </li>

            </ul>
        </div>
    </div>
    <div class="pt-5"></div>
    <div class="row">
        <div class="col-md-6">
            <h3>
                <a href="https://github.com/harr1424/web_crawler">Web Crawler</a>
            </h3>
            <p>
                This python script was written to crawl a website in order to find any anchor tags that
                link to <code>.zip</code> file downloads. The addresses of these files is stored in a list and once
                crawling is completed the script will download each file using the <code>requests</code> library.
            </p>
            <pre>
                <code>
import tweepy
import requests
import time
import sys
import os

API_KEY = os.environ['API_KEY']
API_KEY_SECRET = os.environ['API_KEY_SECRET']
ACCESS_TOKEN = os.environ['ACCESS_TOKEN']
ACCESS_TOKEN_SECRET = os.environ['ACCESS_TOKEN_SECRET']

auth = tweepy.OAuth1UserHandler(consumer_key=API_KEY, consumer_secret=API_KEY_SECRET, access_token=ACCESS_TOKEN, access_token_secret=ACCESS_TOKEN_SECRET)

api = tweepy.API(auth, wait_on_rate_limit=True)

# Provide reference to airnow.gov at the end of each tweet
airnow = 'https://www.airnow.gov/?city=Missoula&state=MT&country=USA'

# helper function to return air quality category when passed an AQI value
def get_category(aqi):
    if aqi < 51:
        return "Good"
    elif 50 < aqi < 101:
        return "Moderate"
    elif 100 < aqi < 151:
        return "Unhealthy for Sensitive Groups"
    elif 150 < aqi < 201:
        return "Unhealthy"
    elif 200 < aqi < 301:
        return "Very Unhealthy"
    elif aqi > 300:
        return "Hazardous"
    else:
        return "<category_error>"


def get_AQI():
    # contact API endpoint
    response = requests.get('https://www.airnowapi.org/aq/observation/zipCode/current/?format=application/json&zipCode=59801&distance=25&API_KEY=664ACC75-2DBA-4812-A360-619F57BBA12A')
    data = response.json()

    # response payload for each pollutant
    o3 = data[0]
    pm25 = data[1]
    pm10 = data[2]

    # ensure response payload matches expected format
    if o3['ParameterName'] != 'O3' or pm25['ParameterName'] != 'PM2.5' or pm10['ParameterName'] != 'PM10':
        print("API returned unexpected payload!")
        sys.exit(-1)

    # AQI for each pollutant
    o3_aqi = data[0]['AQI']
    pm25_aqi = data[1]['AQI']
    pm10_aqi = data[2]['AQI']

    # format time correctly
    am_pm = 'PM' if o3['HourObserved'] > 11 else 'AM'
    latest_measure = o3['HourObserved'] % 12
    if latest_measure == 0 :
        latest_measure = 12

    # dict containing pollutant, aqi as key, value
    all_polutants = {
        'Ozone': o3_aqi,
        'PM 2.5' : pm25_aqi,
        'PM 10' : pm10_aqi
    }

    # get the top pollutant
    top_pollutant = max(all_polutants, key=all_polutants.get)
    # get the value corresponding to the top pollutant
    AQI = all_polutants[top_pollutant]

    # format the tweet
    tweet = f'Current Missoula Air Quality Index is {AQI} ({get_category(AQI)}). The major pollutant is {top_pollutant}. This measurement occurred at {latest_measure} {am_pm}. \n{airnow}'

    return tweet

#print(get_AQI())


if __name__ == "__main__":
    while True:
        try:
            api.verify_credentials()
            print("Authentication succeeded")
            try:
                api.update_status(status=get_AQI())
            except Exception as e:
                print(e)
        except Exception as e:
            print("Authentication failed")
            print(e)
        # run this script every 15 minutes
        # duplicate tweets will be rejected by the Twitter API
        time.sleep(3 * 60 * 60)

                </code>
        </pre>
        </div>
    <div class="col-md-6">
        <h3>
            <a href="https://twitter.com/harr1424">Twitter Air Quality Bot</a>
        </h3>
        <p>
            This python script contacts the US Environmental Protection Agency's
            AirNow API to retrieve current Missoula Air Quality. This data is used to
            format a <i>Tweet</i> informing followers of current air quality.
        </p>
        <pre>
                <code>
import tweepy
import requests
import time
import sys

auth = tweepy.OAuth1UserHandler(API_KEY, API_KEY_SECRET, ACCESS_TOKEN, ACCESS_TOKEN_SECRET)
api = tweepy.API(auth, wait_on_rate_limit=True)

# Provide reference to airnow.gov at the end of each tweet
airnow = 'https://www.airnow.gov/?city=Missoula&state=MT&country=USA'

# helper function to return air quality category when passed an AQI value
def get_category(aqi):
    if aqi < 51:
        return "good"
    elif 50 < aqi < 101:
        return "moderate"
    elif 100 < aqi < 151:
        return "unhealthy for sensitive groups"
    elif 150 < aqi < 201:
        return "unhealthy"
    elif 200 < aqi < 301:
        return "very unhealthy"
    elif aqi > 300:
        return "hazardous"
    else:
        return "<category_error>"


def get_AQI():
    # contact API endpoint
    response = requests.get('https://www.airnowapi.org/aq/observation/zipCode/current/?format=application/json&zipCode=59801&distance=25&API_KEY=664ACC75-2DBA-4812-A360-619F57BBA12A')
    data = response.json()

    # response payload for each pollutant
    o3 = data[0]
    pm25 = data[1]
    pm10 = data[2]

    # ensure response payload matches expected format
    if o3['ParameterName'] != 'O3' or pm25['ParameterName'] != 'PM2.5' or pm10['ParameterName'] != 'PM10':
        print("API returned unexpected payload!")
        sys.exit(-1)

    # AQI for each pollutant
    o3_aqi = data[0]['AQI']
    pm25_aqi = data[1]['AQI']
    pm10_aqi = data[2]['AQI']

    # format time correctly
    am_pm = 'PM' if o3['HourObserved'] > 11 else 'AM'
    latest_measure = o3['HourObserved'] % 12

    # dict containing pollutant, aqi as key, value
    all_polutants = {
        'Ozone': o3_aqi,
        'PM 2.5' : pm25_aqi,
        'PM 10' : pm10_aqi
    }

    # get the top pollutant
    top_pollutant = max(all_polutants, key=all_polutants.get)
    # get the value corresponding to the top pollutant
    AQI = all_polutants[top_pollutant]

    # format the tweet
    tweet = f'Current Missoula Air Quality Index is {AQI} ({get_category(AQI)}). The major pollutant is {top_pollutant}. This measurement occurred at {latest_measure} {am_pm}. \n{airnow}'

    return tweet


if __name__ == "__main__": 
    while True: 
        try: 
            api.verify_credentials()
            print("Authentication succeeded")
            try: 
                api.update_status(status=get_AQI())
            except Exception as e:
                print(e)
        except Exception as e:
            print("Authentication failed")
            print(e)
        # run this script every 15 minutes
        # duplicate tweets will be rejected by the Twitter API
        time.sleep(15 * 60)
        </code>
        </pre>
    </div>
</div>


<!-- Option 1: Bootstrap Bundle with Popper -->
<script crossorigin="anonymous" integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p"
        src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>
</body>

</html>