<!doctype html>
<html lang="en">

<head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta content="width=device-width, initial-scale=1" name="viewport">

    <!-- Bootstrap CSS -->
    <link crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css"
          integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" rel="stylesheet">


    <title>Honorable Mentions</title>
</head>

<body>
<div class="container">
    <div class="row ">
        <div class="dropdown">
            <a class="btn btn-secondary btn-lg dropdown-toggle" href="#" role="button" id="dropdownMenuLink"
               data-bs-toggle="dropdown" aria-expanded="false">
                Portfolio Contents
            </a>

            <ul class="dropdown-menu" aria-labelledby="dropdownMenuLink">
                <li><a class="dropdown-item" href="index.html">Home</a></li>
                <li>
                    <hr class="dropdown-divider">
                </li>
                <li><a class="dropdown-item" href="mobile_app_dev.html">Mobile Application Development</a></li>
                <li><a class="dropdown-item" href="cloud_computing.html">Cloud Computing</a></li>
                <li><a class="dropdown-item" href="3.html">Topic 3</a></li>
                <li><a class="dropdown-item" href="4.html">Topic 4</a></li>
                <li><a class="dropdown-item" href="5.html">Topic 5</a></li>
                <li><a class="dropdown-item" href="reflective_essay.html">Reflective Essay</a></li>
                <li><a class="dropdown-item" href="CV.html">Cirriculum Vitae</a></li>
                <li>
                    <hr class="dropdown-divider">
                <li><a class="dropdown-item" href="orange_weather.html">iOS Networking - Orange Weather</a></li>
                <li><a class="dropdown-item" href="list_maker.html">iOS Data Persistence - List Maker</a></li>
                <li><a class="dropdown-item" href="honorable_mentions.html">Honorable Mentions</a></li>


                </li>

            </ul>
        </div>
    </div>
    <div class="pt-5"></div>
    <div class="row">
        <div class="col-md-6">
            <h3>
                <a href="https://github.com/harr1424/web_crawler">Web Crawler</a>
            </h3>
            <p>
                This python script was written to crawl a website in order to find any anchor tags that
                link to <code>.zip</code> file downloads. The addresses of these files is stored in a list and once
                crawling is completed the script will download each file using the <code>requests</code> library.
            </p>
            <pre>
                <code>
import requests
import re
import os
from bs4 import BeautifulSoup
from tqdm import tqdm

target_url = "https://koradi.org/en/downloads/"

parent_dir = "/Users/user/koradi/" 

headers = {
    'User-Agent': 'Mozilla/5.0 (Macintosh; Intel Mac OS X 10.15; rv:94.0) Gecko/20100101 Firefox/94.0',
}

def crawl():
    target_links = []
    print("Crawling Main Page")
    response = requests.get(target_url, headers=headers)
    soup = BeautifulSoup(response.content, 'html5lib')
    indirect_links = soup.find_all('a', {'href': re.compile(r'/en.*-.*/')})
    authors = [link['href'] for link in indirect_links]
    print("Crawling Secondary Pages")
    for each in tqdm(authors):
        response = requests.get(each, headers=headers)
        soup = BeautifulSoup(response.content, 'html5lib')
        download_links = soup.find_all('a', {'href': re.compile(r'.*.zip')})
        for link in download_links:
            target_links.append(link['href'])
    target_links = list(set(target_links))
    print(len(target_links), "Files available for download...")
    return target_links


def download(target_links):
    print("Beginning Downloads...")
    for link in target_links:
        author = link.split('/')[-2]
        file_name = link.split('/')[-1]
        dir_path = os.path.join(parent_dir, author)
        if not os.path.exists(dir_path):
            os.mkdir(dir_path)
        file_path = os.path.join(dir_path, file_name)
        if not os.path.isfile(file_path):
            print("Downloading file:%s from %s" % (file_name, author))
            response = requests.get(link, stream=True)
            with open(file_path, "wb+") as f:
                for chunk in tqdm(response.iter_content(chunk_size=1024 * 1024)):
                    if chunk:
                        f.write(chunk)
            print("%s downloaded!\n" % file_name)
    print("All files downloaded!")
    return


if __name__ == "__main__":
    links = crawl()
    download(links)
                </code>
        </pre>
        </div>
        <div class="col-md-6">
            <h3>
                <a href="https://twitter.com/harr1424">Twitter Air Quality Bot</a>
            </h3>
            <p>
                This python script contacts the US Environmental Protection Agency's
                AirNow API to retrieve current Missoula Air Quality. This data is used to
                format a <i>Tweet</i> informing followers of current air quality.
            </p>
            <pre>
<code>
import tweepy
import requests
import time
import os

API_KEY = os.environ['API_KEY']
API_KEY_SECRET = os.environ['API_KEY_SECRET']
ACCESS_TOKEN = os.environ['ACCESS_TOKEN']
ACCESS_TOKEN_SECRET = os.environ['ACCESS_TOKEN_SECRET']

auth = tweepy.OAuth1UserHandler(consumer_key=API_KEY, consumer_secret=API_KEY_SECRET, access_token=ACCESS_TOKEN, access_token_secret=ACCESS_TOKEN_SECRET)

api = tweepy.API(auth, wait_on_rate_limit=True)

# Provide reference to airnow.gov at the end of each tweet 
airnow = 'https://www.airnow.gov/?city=Missoula&state=MT&country=USA'

# helper function to return air quality category when passed an AQI value 
def get_category(aqi):
    if aqi < 51:
        return "Good"
    elif 50 < aqi < 101:
        return "Moderate"
    elif 100 < aqi < 151:
        return "Unhealthy for Sensitive Groups"
    elif 150 < aqi < 201:
        return "Unhealthy"
    elif 200 < aqi < 301: 
        return "Very Unhealthy"
    elif aqi > 300: 
        return "Hazardous"
    else: 
        return "<category_error>"


def get_AQI(): 
    # the tweet which will be returned 
    tweet = ''

    # contact API endpoint 
    response = requests.get('https://www.airnowapi.org/aq/observation/zipCode/current/?format=application/json&zipCode=59801&distance=25&API_KEY=REDACTED')
    data = response.json()

    # ensure that all pollutants are contained in response to avoid index out of range
    num_pollutants = len(data)

    # response payload for each pollutant 
    o3 = data[0] if num_pollutants > 0 else None
    pm25 = data[1] if num_pollutants > 1 else None
    pm10 = data[2] if num_pollutants > 2 else None

    # AQI for each pollutant
    if o3:
        if o3['ParameterName'] == 'O3':
            o3_aqi = o3['AQI']
        else:
            o3_aqi = None
            tweet += "API returned unexpected payload for Ozone! "
    else:
        o3_aqi = None
        tweet += "No Ozone data provided. "

    if pm25:
        if pm25['ParameterName'] == 'PM2.5':
            pm25_aqi = pm25['AQI']
        else:
            pm25_aqi = None
            tweet += "API returned unexpected payload for PM2.5! "
    else:
        pm25_aqi = None
        tweet += "No PM2.5 data provided. "

    if pm10:
        if pm10['ParameterName'] == 'PM10':
            pm10_aqi = pm10['AQI']
        else:
            pm10_aqi = None
            tweet += "API returned unexpected payload for PM10! "
    else:
        pm10_aqi = None
        tweet += "No PM10 data provided. "

    # format time correctly
    if o3:
        latest_measure = (12 - ((- o3['HourObserved']) % 12), 'AM' if o3['HourObserved'] < 11 else 'PM')
    elif pm25:
        latest_measure = (12 - ((- pm25['HourObserved']) % 12), 'AM' if pm25['HourObserved'] < 11 else 'PM')
    elif pm10:
        latest_measure = (12 - ((- pm10['HourObserved']) % 12), 'AM' if pm10['HourObserved'] < 11 else 'PM')
    else: 
        latest_measure = 'an unknown time. An error occurred.'

    # dict containing pollutant, aqi as key, value
    all_polutants = {
        'Ozone (03)': o3_aqi if o3_aqi else None,
        'Fine Particles (PM 2.5)' : pm25_aqi if pm25_aqi else None, 
        'Course Particles (PM 10)' : pm10_aqi if pm10_aqi else None
    }

    # get the top pollutant
    top_pollutant = max(all_polutants, key = lambda k: all_polutants[k] if all_polutants[k] != None else float('-inf'))

    # get the value corresponding to the top pollutant
    AQI = all_polutants[top_pollutant]

    # format the tweet 
    tweet += f'Current Missoula Air Quality Index is {AQI} ({get_category(AQI)}). The major pollutant is {top_pollutant}. This measurement occurred at {latest_measure[0]} {latest_measure[1]}. \n{airnow}'

    return tweet


if __name__ == "__main__": 
while True: 
try: 
    api.verify_credentials()
    print("Authentication succeeded")
    try: 
        api.update_status(status=get_AQI())
    except Exception as e:
        print(e)
except Exception as e:
    print("Authentication failed")
    print(e)

# run this script every 15 minutes
# duplicate tweets will be rejected by the Twitter API
time.sleep(3 * 60 * 60)            
        </code>
        </pre>
        </div>

        <div class="col-md-6 text-center">
            <h3>
                <a href="https://github.com/harr1424/koradi_radio-master">Koradi App</a>
            </h3>
            <p>
                The Koradi App is a Flutter project allowing users to interact with Koradi Radio. This
                application
                has been localized for six different languages and allows users to connect to a continuous audio
                stream
                originating from the Koradi Radio server. It implements a
                <a href="https://pub.dev/packages/audio_service">background audio service</a>
                in order to continuously play media, even when the app is not in the foreground.
            </p>
            <img alt="Koradi App screenshot" class="mx-auto d-block" height="700" src="images/koradi.png"/>
            <br>
            <a href='https://play.google.com/store/apps/details?id=com.koradi.radio&pcampaignid=pcampaignidMKT-Other-global-all-co-prtnr-py-PartBadge-Mar2515-1'
               style="display: inline; overflow: hidden; border-radius: 23px; width: 250px; height: 100px;"><img
                    alt='Get it on Google Play'
                    height="100"
                    src='https://play.google.com/intl/en_us/badges/static/images/badges/en_badge_web_generic.png'/></a>
            <a href="https://apps.apple.com/us/app/koradi-app/id1606623606?itsct=apps_box_badge&amp;itscg=30200"
               style="display: inline; overflow: hidden; border-radius: 13px; width: 250px; height: 100px;"><img
                    alt="Download on the App Store"
                    src="https://tools.applemediaservices.com/api/badges/download-on-the-app-store/black/en-us?size=250x83&amp;releaseDate=1645142400&h=652fffa4f11b0f00c251d54e870e69a3"
                    style="width: 250px; height: 70px;"></a>
        </div>
    </div>
</div>


    <div style="text-align: center">
        <h3><a href="#">Top Of Page</a></h3>
    </div>


    <!-- Option 1: Bootstrap Bundle with Popper -->
    <script crossorigin="anonymous" integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p"
            src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>
</body>

</html>